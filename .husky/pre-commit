# Check if ignoreBuildErrors is enabled in next.config.ts
if grep -q "ignoreBuildErrors: true" next.config.ts; then
  echo "âš ï¸  Note: ignoreBuildErrors is enabled"
  echo "ğŸ” Checking for NEW TypeScript errors in staged files only..."
  
  # Only check staged .ts/.tsx files (incremental check)
  npx lint-staged
  
else
  # Full type check when ignoreBuildErrors is false
  echo "ğŸ” Full TypeScript type check..."
  npm run type-check || {
    echo ""
    echo "âŒ TypeScript errors found!"
    echo "ğŸ”§ Fix the errors before committing."
    echo ""
    exit 1
  }
  
  npx lint-staged
fi

