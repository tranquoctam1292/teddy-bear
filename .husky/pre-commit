# Check if ignoreBuildErrors is enabled in next.config.ts
if grep -q "ignoreBuildErrors: true" next.config.ts; then
  echo "âš ï¸  Note: ignoreBuildErrors is enabled"
  echo "ğŸ” Running: ESLint + Prettier on staged files..."
  echo "â„¹ï¸  (TypeScript check skipped - existing errors documented)"
  echo "ğŸ“  82 known errors tracked in TYPESCRIPT_ERRORS_ANALYSIS.md"
  
  # Run linting and formatting on staged files
  # NOTE: lint-staged runs ESLint + Prettier, NOT TypeScript type-check
  # This prevents new syntax/style errors while allowing tracked type errors
  npx lint-staged
  
else
  # Full type check when ignoreBuildErrors is false
  echo "ğŸ” Full TypeScript type check..."
  npm run type-check || {
    echo ""
    echo "âŒ TypeScript errors found!"
    echo "ğŸ”§ Fix the errors before committing."
    echo ""
    exit 1
  }
  
  npx lint-staged
fi

